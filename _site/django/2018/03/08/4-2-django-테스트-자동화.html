<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <title>SUNDRYCODES - 
      4-2. Django 테스트 자동화
    </title>
  <meta name="robots" content="follow, all">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
  <meta name="description" content="짤막한, 아니면 기억하고 싶은 잡스런 코드나 약간의 주절거림이 있는 개인 블로그입니다.">
  <meta name="keywords" content="ARM-server, Alibabacloud, BeagleBone-Black, D2-coding, Django, EACCES, IPTV, L2TP, Linode, Python, Regular-Expressions, SSH, Sqlite, VPN, VPS, atom, basic, baytrail, eMMC, elm, error, git, github.io, ip우회, mailprogramming, mmcblk, mmcblkXbootY, monospace, pip, pip2, pip3, reset, rollback, server, tvheadend, ubuntu, virtualenv, virtualenvwrapper, webfont, x86-안드로이드, 개인서버, 고정폭, 관리자페이지, 깃허브페이지, 도커, 레노버, 린노드, 막힌사이트뚫기, 매일프로그래밍, 부트파티션, 쓰기해제, 안드로이드-태블릿, 알리바바클라우드, 앱-재정의, 엘름, 오류, 웹폰트, 이벤트-당첨, 장고, 저전력서버, 정규표현식, 정적파일, 첫글, 클라우드서버, 터미널, 파이썬">
  <meta name="author" content="Rockheung">
  <link rel="pingback" href="/xmlrpc/">
  <link rel="home" href="/">

  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- D2-coding webfont -->
  <link href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Monofett|Zilla+Slab+Highlight:700" rel="stylesheet">

  <!--[if lt IE 9]>
    <script src="/assets/js/html5shiv.js"></script>
    <script src="/assets/js/respond.min.js"></script>
  <![endif]-->

  <!-- Generarted by https://www.favicon-generator.org -->
  <link rel="shortcut icon" href="/assets/ico/favicon.ico">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/ico/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/ico/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/ico/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/ico/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/ico/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/ico/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/ico/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/ico/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/ico/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/ico/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/ico/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/ico/favicon-16x16.png">
  <link rel="manifest" href="/assets/ico/manifest.json">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="/assets/ico/ms-icon-144x144.png">
  <meta name="theme-color" content="#FFFFFF">

  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic|Nanum+Myeongjo" rel="stylesheet">

  <link rel="stylesheet" href="/assets/main.css" type="text/css">
</head>


  <body>
    <div class="container-fluid">
  <div id="banner" class="hidden-xs col-sm-12">
    <a href="http://plex.rockheung.xyz" target="_blank">
      <img src="https://res.cloudinary.com/rockheung/image/upload/v1518684835/plex-logo_cn5za9.png"/>
    </a>
  </div>
</div>



    <div class="wrapper">
      <nav id="sidebar">
  <!-- Sidebar Header -->
  <div class="sidebar-header text-center">
    <a href="/">
      Sundry Codes
    </a>
  </div>

  <div class="sidebar-search visible-xs">
    <div class="col-xs-12">
      <form action="" class="search-form">
        <div class="form-group has-feedback">
          <label for="search" class="sr-only">Search</label>
          <input type="text" class="search-query form-control" placeholder="Search" name="pattern" value="pattern" >
          <span class="glyphicon glyphicon-search form-control-feedback"></span>
        </div>
      </form>
    </div>
  </div>

  <!-- Sidebar Links -->
  <div class="container">

    <ul class="list-unstyled components">
      <!-- Here would be better off instorucing my Info. -->

      <li class="active">
        <a href="#categorySubmenu" data-toggle="collapse" aria-expanded="true">
          Categories
        </a>
        <ul class="collapse in list-unstyled" id="categorySubmenu">
          
          
          
            
              <li class="current">
                <a href="/category/#django"
                   title="Show all entries in django">django
                   <span class="label pull-right">
                     
                     

                     6 posts
                     
                   </span>
                </a>
              </li>
            
              <li class="">
                <a href="/category/#study"
                   title="Show all entries in study">study
                   <span class="label pull-right">
                     
                     

                     8 posts
                     
                   </span>
                </a>
              </li>
            
              <li class="">
                <a href="/category/#매일프로그래밍"
                   title="Show all entries in 매일프로그래밍">매일프로그래밍
                   <span class="label pull-right">
                     
                     

                     10 posts
                     
                   </span>
                </a>
              </li>
            
              <li class="">
                <a href="/category/#서버"
                   title="Show all entries in 서버">서버
                   <span class="label pull-right">
                     
                     

                     2 posts
                     
                   </span>
                </a>
              </li>
            
              <li class="">
                <a href="/category/#일상"
                   title="Show all entries in 일상">일상
                   <span class="label pull-right">
                     
                     

                     8 posts
                     
                   </span>
                </a>
              </li>
            
          
        </ul>
      </li>

      <li class="active">
        <a href="#recententriesSubmenu" data-toggle="collapse" aria-expanded="true">
          Recent posts
        </a>
        <ul class="collapse in list-unstyled" id="recententriesSubmenu">
          
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/21/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-10.html" title="매일프로그래밍 실리콘밸리 패키지 문제 10" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 10</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/20/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-9.html" title="매일프로그래밍 실리콘밸리 패키지 문제 9" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 9</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/20/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-8.html" title="매일프로그래밍 실리콘밸리 패키지 문제 8" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 8</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/20/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-7.html" title="매일프로그래밍 실리콘밸리 패키지 문제 7" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 7</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/19/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-6.html" title="매일프로그래밍 실리콘밸리 패키지 문제 6" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 6</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/16/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-5.html" title="매일프로그래밍 실리콘밸리 패키지 문제 5" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 5</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/16/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-4.html" title="매일프로그래밍 실리콘밸리 패키지 문제 4" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 4</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/16/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-3.html" title="매일프로그래밍 실리콘밸리 패키지 문제 3" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 3</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/16/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-2.html" title="매일프로그래밍 실리콘밸리 패키지 문제 2" rel="bookmark">매일프로그래밍 실리콘밸리 패키지 문제 2</a>
              </li>
            
              
              <li class="">
                <a href="http://localhost:4000/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2018/08/15/%EB%A7%A4%EC%9D%BC%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%8B%A4%EB%A6%AC%EC%BD%98%EB%B0%B8%EB%A6%AC-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%AC%B8%EC%A0%9C-1.html" title="매일프로그래밍 - 실리콘밸리 패키지 문제 1" rel="bookmark">매일프로그래밍 - 실리콘밸리 패키지 문제 1</a>
              </li>
            
              
                
          
        </ul>
      </li>

      <li class="active">
        <a href="#tagcloudSubmenu" data-toggle="collapse" aria-expanded="true">
          Tags
        </a>
        
        
        
        <ul id="tagcloudSubmenu" class="callapse in list-unstyled tag-cloud">
          
            
              
              

              <li>
                <a href="/tag/#ARM-server"
                   title="1 post tagged by ARM-server
                            "
                   class="tag-1">ARM-server</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Alibabacloud"
                   title="1 post tagged by Alibabacloud
                            "
                   class="tag-1">Alibabacloud</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#BeagleBone-Black"
                   title="1 post tagged by BeagleBone-Black
                            "
                   class="tag-1">BeagleBone-Black</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#D2-coding"
                   title="1 post tagged by D2-coding
                            "
                   class="tag-1">D2-coding</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Django"
                   title="4 posts tagged by Django
                          "
                   class="tag-5">Django</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#EACCES"
                   title="1 post tagged by EACCES
                            "
                   class="tag-1">EACCES</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#IPTV"
                   title="2 posts tagged by IPTV
                          "
                   class="tag-2">IPTV</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#L2TP"
                   title="1 post tagged by L2TP
                            "
                   class="tag-1">L2TP</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Linode"
                   title="1 post tagged by Linode
                            "
                   class="tag-1">Linode</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Python"
                   title="4 posts tagged by Python
                          "
                   class="tag-5">Python</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Regular-Expressions"
                   title="1 post tagged by Regular-Expressions
                            "
                   class="tag-1">Regular-Expressions</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#SSH"
                   title="1 post tagged by SSH
                            "
                   class="tag-1">SSH</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#Sqlite"
                   title="1 post tagged by Sqlite
                            "
                   class="tag-1">Sqlite</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#VPN"
                   title="1 post tagged by VPN
                            "
                   class="tag-1">VPN</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#VPS"
                   title="1 post tagged by VPS
                            "
                   class="tag-1">VPS</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#atom"
                   title="1 post tagged by atom
                            "
                   class="tag-1">atom</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#basic"
                   title="1 post tagged by basic
                            "
                   class="tag-1">basic</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#baytrail"
                   title="1 post tagged by baytrail
                            "
                   class="tag-1">baytrail</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#eMMC"
                   title="1 post tagged by eMMC
                            "
                   class="tag-1">eMMC</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#elm"
                   title="1 post tagged by elm
                            "
                   class="tag-1">elm</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#error"
                   title="1 post tagged by error
                            "
                   class="tag-1">error</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#git"
                   title="2 posts tagged by git
                          "
                   class="tag-2">git</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#github.io"
                   title="1 post tagged by github.io
                            "
                   class="tag-1">github.io</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#ip우회"
                   title="1 post tagged by ip우회
                            "
                   class="tag-1">ip우회</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#mailprogramming"
                   title="10 posts tagged by mailprogramming
                          "
                   class="tag-13">mailprogramming</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#mmcblk"
                   title="1 post tagged by mmcblk
                            "
                   class="tag-1">mmcblk</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#mmcblkXbootY"
                   title="1 post tagged by mmcblkXbootY
                            "
                   class="tag-1">mmcblkXbootY</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#monospace"
                   title="1 post tagged by monospace
                            "
                   class="tag-1">monospace</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#pip"
                   title="1 post tagged by pip
                            "
                   class="tag-1">pip</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#pip2"
                   title="1 post tagged by pip2
                            "
                   class="tag-1">pip2</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#pip3"
                   title="1 post tagged by pip3
                            "
                   class="tag-1">pip3</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#reset"
                   title="1 post tagged by reset
                            "
                   class="tag-1">reset</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#rollback"
                   title="1 post tagged by rollback
                            "
                   class="tag-1">rollback</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#server"
                   title="1 post tagged by server
                            "
                   class="tag-1">server</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#tvheadend"
                   title="2 posts tagged by tvheadend
                          "
                   class="tag-2">tvheadend</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#ubuntu"
                   title="1 post tagged by ubuntu
                            "
                   class="tag-1">ubuntu</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#virtualenv"
                   title="2 posts tagged by virtualenv
                          "
                   class="tag-2">virtualenv</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#virtualenvwrapper"
                   title="2 posts tagged by virtualenvwrapper
                          "
                   class="tag-2">virtualenvwrapper</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#webfont"
                   title="1 post tagged by webfont
                            "
                   class="tag-1">webfont</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#x86-안드로이드"
                   title="1 post tagged by x86-안드로이드
                            "
                   class="tag-1">x86-안드로이드</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#개인서버"
                   title="1 post tagged by 개인서버
                            "
                   class="tag-1">개인서버</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#고정폭"
                   title="1 post tagged by 고정폭
                            "
                   class="tag-1">고정폭</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#관리자페이지"
                   title="1 post tagged by 관리자페이지
                            "
                   class="tag-1">관리자페이지</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#깃허브페이지"
                   title="1 post tagged by 깃허브페이지
                            "
                   class="tag-1">깃허브페이지</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#도커"
                   title="1 post tagged by 도커
                            "
                   class="tag-1">도커</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#레노버"
                   title="1 post tagged by 레노버
                            "
                   class="tag-1">레노버</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#린노드"
                   title="1 post tagged by 린노드
                            "
                   class="tag-1">린노드</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#막힌사이트뚫기"
                   title="1 post tagged by 막힌사이트뚫기
                            "
                   class="tag-1">막힌사이트뚫기</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#매일프로그래밍"
                   title="10 posts tagged by 매일프로그래밍
                          "
                   class="tag-13">매일프로그래밍</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#부트파티션"
                   title="1 post tagged by 부트파티션
                            "
                   class="tag-1">부트파티션</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#쓰기해제"
                   title="1 post tagged by 쓰기해제
                            "
                   class="tag-1">쓰기해제</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#안드로이드-태블릿"
                   title="1 post tagged by 안드로이드-태블릿
                            "
                   class="tag-1">안드로이드-태블릿</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#알리바바클라우드"
                   title="1 post tagged by 알리바바클라우드
                            "
                   class="tag-1">알리바바클라우드</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#앱-재정의"
                   title="1 post tagged by 앱-재정의
                            "
                   class="tag-1">앱-재정의</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#엘름"
                   title="1 post tagged by 엘름
                            "
                   class="tag-1">엘름</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#오류"
                   title="1 post tagged by 오류
                            "
                   class="tag-1">오류</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#웹폰트"
                   title="1 post tagged by 웹폰트
                            "
                   class="tag-1">웹폰트</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#이벤트-당첨"
                   title="1 post tagged by 이벤트-당첨
                            "
                   class="tag-1">이벤트-당첨</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#장고"
                   title="3 posts tagged by 장고
                          "
                   class="tag-3">장고</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#저전력서버"
                   title="1 post tagged by 저전력서버
                            "
                   class="tag-1">저전력서버</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#정규표현식"
                   title="1 post tagged by 정규표현식
                            "
                   class="tag-1">정규표현식</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#정적파일"
                   title="1 post tagged by 정적파일
                            "
                   class="tag-1">정적파일</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#첫글"
                   title="1 post tagged by 첫글
                            "
                   class="tag-1">첫글</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#클라우드서버"
                   title="1 post tagged by 클라우드서버
                            "
                   class="tag-1">클라우드서버</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#터미널"
                   title="1 post tagged by 터미널
                            "
                   class="tag-1">터미널</a>
              </li>
            
              
              

              <li>
                <a href="/tag/#파이썬"
                   title="5 posts tagged by 파이썬
                          "
                   class="tag-6">파이썬</a>
              </li>
            
          
        </ul>
      </li>


      <li class="active">
        <a href="#recentcomments" data-toggle="collapse" aria-expanded="true">
          Recent comments
        </a>
        <div id="recentcomments" class="dsq-widget collapse in"><script type="text/javascript" src="https://sundry-rockheung.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=1&avatar_size=32&excerpt_length=200"></script></div>
      </li>

    </ul>
  </div>
</nav>



      <div id="content">
        <nav class="navbar" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
		</div>

		<div class="container-fluid">
			<div class="row">

				<!-- toggle button -->
				<div class="col-xs-2 col-sm-3">
					<button type="button" id="sidebarCollapse" class="btn navbar-btn">
						<span class="sr-only">Toggle navigation</span>
						<i class="glyphicon glyphicon-align-left"></i>
					</button>
				</div>

				<div class="visible-xs col-xs-2 col-xs-push-8">
					<div class="pull-right">
						<a href="/" title="Rockheung's Sundry" class="navbar-brand" rel="home">
              <img src="/assets/ico/home.png" class="img-rounded home-img" alt="Rockheung's Sundry" >
						</a>
					</div>
				</div>

				<div class="hidden-xs col-sm-6">
					<div class="col-sm-12 text-center">
						<a href="/" title="Rockheung's Sundry" class="navbar-brand aps-pos" rel="home">
              <img src="/assets/ico/home.png" class="img-rounded home-img" alt="Rockheung's Sundry" >
						</a>
					</div>
				</div>

				<div class="clearfix visible-xs"></div>

				<div class="col-xs-12 col-sm-3 hidden-xs">
					<form class="search-form" method="get" action="http://www.google.com/search" target="_blank" >
						<div class="form-group has-feedback">
							<label for="search" class="sr-only">Search</label>
              <input type="hidden" name="sitesearch" value="http://localhost:4000">
							<input class="search-query form-control" type="text" name="q" maxlength="255" placeholder="Search" value="">
							<span class="glyphicon glyphicon-search form-control-feedback"></span>
						</div>
					</form>
				</div>
			</div>

		</div>
	</div>
</nav>



        <div class="container-fluid">
          <div class="row">
            <div class="col-xs-11 col-xs-push-1 col-sm-10 col-sm-push-1 col-md-8 col-md-push-2 col-lg-6 col-lg-push-3">
              <div class="breadcrumbs">
  <ul class="breadcrumb">
    
    
    
    <li class="deactive">
          Post
      </li>
    
    <li class="deactive">
          2018
      </li>
    
    <li class="deactive">
          Mar
      </li>
    
    <li class="deactive">
          8
      </li>
    
    <li >
          4-2. Django 테스트 자동화
      </li>
    
  </ul>
</div>


              <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">4-2. Django 테스트 자동화</h1>
    <span class="post-tags">
      [&nbsp;
      
        
        <a class="no-underline" href="/tag/#Django"><code class="highligher-rouge"><nobr>Django</nobr></code>&nbsp;</a>
      
        
        <a class="no-underline" href="/tag/#Python"><code class="highligher-rouge"><nobr>Python</nobr></code>&nbsp;</a>
      
        
        <a class="no-underline" href="/tag/#장고"><code class="highligher-rouge"><nobr>장고</nobr></code>&nbsp;</a>
      
        
        <a class="no-underline" href="/tag/#파이썬"><code class="highligher-rouge"><nobr>파이썬</nobr></code>&nbsp;</a>
      
      ]
    </span>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-03-08T11:00:11+09:00" itemprop="datePublished">
        
        Mar 8, 2018
      </time>
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>별 필요가 없다고 생각할 수도 있다. 하지만 그 이면에는 <em>안이함</em>과 <em>귀찮음</em>, 그리고 <em>버그따윈 있을리가</em>따위와 같은 생각들이 자리잡고 있을 것이다. 그러나 기능이 더해지면서 추가된 코드들은 기존의 코드에 영향을 주기 시작할 것이 분명한데, 그때마다 기존의 기능이 잘 동작하는지 확인하는 작업은 결코 허드렛일이 아니다. 어떤 형태로든 미래에 당면할 문제를 해결하기 위해 수많은 print와 원인 파악에 드는 시간을 절약할 수 있다면, 자동화된 테스트는 개중에 가장 값싼 <em>보험</em>이 분명하다.</p>

<p><code class="highlighter-rouge">blog/models.py</code>의 <code class="highlighter-rouge">Question</code> 클래스에 다음 함수를 추가하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import datetime
from django.utils import timezone

def was_published_recently(self):
    return self.pub_date &gt;= timezone.now() - datetime.timedelta(days=1)
</code></pre></div></div>

<p>언뜻 보기에는 명료해 보인다. <em>최근에 발간되었는가?</em>의 질문에, 현재 시점에서 하루동안 발간되었으면 True를, 아니면 False를 리턴할 것이다. 그러나 만약 발간 날짜가 미래라면? 그럼에도 True를 리턴할 것임을 어렵지 않게 유추할 수 있다.</p>

<p>수동으로 테스트하려면 아마도 이런 식일 것이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; from blog.models import Question
&gt;&gt;&gt; from django.utils import timezone
&gt;&gt;&gt; q_the_future =Question( pub_date =timezone.now() +datetime.timedelta( days =30 ) )
&gt;&gt;&gt; q_the_future.was_published_recently()
True
</code></pre></div></div>

<p>이는 분명 <em>최근 발행되었는지를</em> 알아내는 함수로는 적절하지 못하다. 이제 위의 코드를 <code class="highlighter-rouge">blog/tests.py</code>에 작성해 보자. <code class="highlighter-rouge">QuestionModelTests</code>클래스가 <code class="highlighter-rouge">TestCase</code>클래스를 상속받고 있다. 그리고 앞에서 쉘로 테스트했던 코드를 이용하여 <code class="highlighter-rouge">test_was_published_recently_with_future_question</code>메서드를 만들어 (확인해보지는 않았지만 <code class="highlighter-rouge">TestCase</code>클래스로부터 상속받았음이 분명한) <code class="highlighter-rouge">assertIs()</code>로 테스트하고자 하는 메서드의 의도한 결과값을 지정하고 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import datetime

from django.utils import timezone
from django.test import TestCase

from .models import Question

class QuestionModelTests( TestCase ):

    def test_was_published_recently_with_future_question( self ):
        """
        was_published_recently() returns False for questions whose pub_date
        is in the future.
        """
        time = timezone.now() +datetime.timedelta( days=30 )
        q_the_future =Question( pub_date =time )
        self.assertIs( q_the_future.was_published_recently(), False )
</code></pre></div></div>

<p>그리고 터미널에서 <code class="highlighter-rouge">python manage.py test blog</code>를 날리면 다음 결과를 볼 수 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test blog
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
F
======================================================================
FAIL: test_was_published_recently_with_future_question (blog.tests.QuestionModelTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/rockheung/git/django-blog/_base/blog/tests.py", line 18, in 
test_was_published_recently_with_future_question
    self.assertIs(future_question.was_published_recently(), False)
AssertionError: True is not False

----------------------------------------------------------------------
Ran 1 test in 0.001s

FAILED (failures=1)
Destroying test database for alias 'default'...
</code></pre></div></div>

<hr />

<p>뷰 테스트</p>

<p>조금 의아할 수도 있다. Shell에서 웹브라우저에서나 볼 수 있는 뷰를 테스트한다니, 어떻게 그럴 수 있을까? 일단 터미널에 <code class="highlighter-rouge">python manage.py shell</code>를 날리자. 그리고 <code class="highlighter-rouge">setup_test_environment()</code>메서드를 임포트하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py shell
&gt;&gt;&gt; from django.test.utils import setup_test_environment
&gt;&gt;&gt; setup_test_environment()
</code></pre></div></div>

<p>그러면 쉘에서도 http 요청을 날릴 수 있다. 이렇게 말이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from django.test import Client
&gt;&gt;&gt; client =Client()
&gt;&gt;&gt; response =client.get('/')
&gt;&gt;&gt; print(response)
&lt;HttpResponseRedirect status_code=302, "text/html; charset=utf-8", url="/blog/"&gt;
</code></pre></div></div>

<p>명확한 흐름이다. 도메인에 접속했더니, 도메인/blog/ 주소로 리다이렉트되었다. 이전 글에서 마지막에 <code class="highlighter-rouge">_base/urls.py</code>에 작성한 부분이 잘 작동됨을 확인할 수 있다. 만약 해당 부분을 하지 않았다면, 다음과 같이 <em>그런거 없어</em> 라고 404에러를 보여줄 것이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; print( client.get( '/nothing-like-that/' ) )
Not Found: /nothing-like-that/
&lt;HttpResponseNotFound status_code=404, "text/html"&gt;
</code></pre></div></div>

<p>일반적인 응답은, 물론 <em>status_code=200</em>일 때다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from django.urls import reverse
&gt;&gt;&gt; print( client.get( reverse( blog:index ) ) )
&lt;TemplateResponse status_code=200, "text/html; charset=utf-8"&gt;
&gt;&gt;&gt; response.content
b'\n&lt;ul&gt;\n  \n  &lt;li&gt;&lt;a href="/blog/1/"&gt;What&amp;#39;s up?&lt;/a&gt;&lt;/li&gt;\n  \n&lt;/ul&gt;\n\n\n'
</code></pre></div></div>

<p>blog앱은 Question의 pub_date가 미래로 설정되어 있어도 그 시점이 되기 전에 보여지는 문제가 있다. <code class="highlighter-rouge">blog/views.py</code>를 수정해서 해결하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class IndexView(generic.ListView):
        template_name = 'blog/index.html'
        context_object_name = 'latest_question_list'

    def get_queryset(self):
        """Return the last five published questions."""
        return Question.objects.order_by('-pub_date')[:5]
</code></pre></div></div>

<p><code class="highlighter-rouge">get_queryset()</code>메서드를 수정하여 현재 시점과 비교하는 과정을 추가할 생각이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from django.utils import timezone

def get_queryset(self):
    """
    Return the last five published questions (not including those set to be
    published in the future).
    """
    return Question.objects.filter( pub_date__lte =timezone.now() ).order_by( '-pub_date' )[ :5 ]
</code></pre></div></div>

<p>조금 이상한가? pub_date__lte는 어디서 튀어나온 것일까? 이는 장고의 <em>Field Lookup</em>이 사용된 것이다. 기본적인 형태는 <code class="highlighter-rouge">field__lookuptype=value</code>의 형태이다. 이것은 하나의 SQL WHERE 구문이 뜻할 의미를 명시하고, <code class="highlighter-rouge">filter()</code>, <code class="highlighter-rouge">exclude()</code>, 그리고 <code class="highlighter-rouge">get()</code>와 같은 QuerySet<code class="highlighter-rouge"> 메서드에게 전달한다. </code>_lte`는 그러니까 lookuptype을 나타내는 듯 싶다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from blog.models. import Question
&gt;&gt;&gt; q =Question.objects.filter(pub_date__lte='2019-01-01')
/home/rockheung/.virtualenvs/django-blog/lib/python3.5/site-packages/django/db/models/fields/__init__.py:1423: RuntimeWarning: DateTimeField Question.pub_date received a naive datetime (2019-01-01 00:00:00) while time zone support is active.
  RuntimeWarning)
&gt;&gt;&gt; q
&lt;QuerySet [&lt;Question: What's up?&gt;]&gt;
</code></pre></div></div>

<p>위에서 대충 얘기하면 <code class="highlighter-rouge">SELECT * FROM blog_entry WHERE pub_date &lt;= '2019-01-01';</code>와 같은 쿼리가 DB를 훓고 결과를 긁어온 것이다.</p>

<p>어떻게 이것이 가능할까? 파이썬에서는 메서드의 인수를 dict타입으로도 받는다. 아래의 예시를 보자. <a href="https://docs.python.org/3/tutorial/controlflow.html#tut-keywordargs">출처</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def cheeseshop(kind, *arguments, **keywords):
    print("-- Do you have any", kind, "?")
    print("-- I'm sorry, we're all out of", kind)
    for arg in arguments:
        print(arg)
    print("-" * 40)
    for kw in keywords:
        print(kw, ":", keywords[kw])

&gt;&gt;&gt; cheeseshop("Limburger", "It's very runny, sir.", \
       "It's really very, VERY runny, sir.", \
       shopkeeper="Michael Palin", \
       client="John Cleese", \
       sketch="Cheese Shop  Sketch")
-- Do you have any Limburger ?
-- I'm sorry, we're all out of Limburger
It's very runny, sir.
It's really very, VERY runny, sir.
----------------------------------------
shopkeeper : Michael Palin
client : John Cleese
sketch : Cheese Shop Sketch
</code></pre></div></div>

<p><em>치즈가게</em> 메서드에서 <em>“Limburger”</em>문자열은 <code class="highlighter-rouge">kind</code>인수에, 그 다음 <em>“It’s very runny, sir.”, “It’s really very, VERY runny, sir.”,</em> 는 <code class="highlighter-rouge">arguments</code> 인수에 리스트 타입으로,  <em>shopkeeper=”Michael Palin”, client=”John Cleese”, sketch=”Cheese Shop  Sketch”</em>는 <code class="highlighter-rouge">keywords</code>인수에 딕셔너리 타입으로 입력된 것을 확인할 수 있을 것이다. 보다시피, 별게 아니라 그냥 파이썬 구문이다.</p>

<hr />

<p>뷰 테스트 스크립트 작성</p>

<p>이제까지 내용을 참고해서 질문을 생성하여 그것이 과거, 현재, 미래에 발간publish되었을때, 보여질 것만 보여지는지를 확인해 볼 것이다. 아까와 마찬가지로 <code class="highlighter-rouge">blog/test.py</code>에 다음과 같이 작성한다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def create_question(question_text, days):
    """
    Create a question with the given `question_text` and published the
    given number of `days` offset to now (negative for questions published
    in the past, positive for questions that have yet to be published).
    """
    time = timezone.now() + datetime.timedelta(days=days)
    return Question.objects.create(question_text=question_text, pub_date=time)


class QuestionIndexViewTests(TestCase):
    def test_no_questions(self):
        """
        If no questions exist, an appropriate message is displayed.
        """
        response = self.client.get(reverse('blog:index'))
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, "No Blog available.")
        self.assertQuerysetEqual(response.context['latest_question_list'], [])

    def test_past_question(self):
        """
        Questions with a pub_date in the past are displayed on the
        index page.
        """
        create_question(question_text="Past question.", days=-30)
        response = self.client.get(reverse('blog:index'))
        self.assertQuerysetEqual(
            response.context['latest_question_list'],
            ['&lt;Question: Past question.&gt;']
        )

    def test_future_question(self):
        """
        Questions with a pub_date in the future aren't displayed on
        the index page.
        """
        create_question(question_text="Future question.", days=30)
        response = self.client.get(reverse('blog:index'))
        self.assertContains(response, "No Blog available.")
        self.assertQuerysetEqual(response.context['latest_question_list'], [])

    def test_future_question_and_past_question(self):
        """
        Even if both past and future questions exist, only past questions
        are displayed.
        """
        create_question(question_text="Past question.", days=-30)
        create_question(question_text="Future question.", days=30)
        response = self.client.get(reverse('blog:index'))
        self.assertQuerysetEqual(
            response.context['latest_question_list'],
            ['&lt;Question: Past question.&gt;']
        )

    def test_two_past_questions(self):
        """
        The questions index page may display multiple questions.
        """
        create_question(question_text="Past question 1.", days=-30)
        create_question(question_text="Past question 2.", days=-5)
        response = self.client.get(reverse('blog:index'))
        self.assertQuerysetEqual(
            response.context['latest_question_list'],
            ['&lt;Question: Past question 2.&gt;', '&lt;Question: Past question 1.&gt;']
        )
</code></pre></div></div>

<p>앞에서와 마찬가지로 테스트 스크립트를 실행해 보자</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test blog
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
........
----------------------------------------------------------------------
Ran 8 tests in 0.021s

OK
Destroying test database for alias 'default'...
</code></pre></div></div>

<p>잘 작동한다.</p>

<hr />

<p>DetailView의 문제</p>

<p>앞에서 미래의 설문이 보이지 않게 수정하고 테스트 스크립트를 통해 검증하였다. 그러나 URL가 알려진 질문은 접근할 수 있다. <code class="highlighter-rouge">blog/views.py</code>에서 현재 시점까지의 질문만 DB에서 참조하도록 제한하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class DetailView(generic.DetailView):
    ...
    def get_queryset(self):
        """
        Excludes any questions that aren't published yet.
        """
        return Question.objects.filter(pub_date__lte=timezone.now())
</code></pre></div></div>

<p><code class="highlighter-rouge">blog/tests.py</code>에 다음을 작성하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class QuestionDetailViewTests(TestCase):
    def test_future_question(self):
        """
        The detail view of a question with a pub_date in the future
        returns a 404 not found.
        """
        future_question = create_question(question_text='Future question.', days=5)
        url = reverse('blog:detail', args=(future_question.id,))
        response = self.client.get(url)
        self.assertEqual(response.status_code, 404)

    def test_past_question(self):
        """
        The detail view of a question with a pub_date in the past
        displays the question's text.
        """
        past_question = create_question(question_text='Past Question.', days=-5)
        url = reverse('blog:detail', args=(past_question.id,))
        response = self.client.get(url)
        self.assertContains(response, past_question.question_text)
</code></pre></div></div>

<p>역시 잘 작동함을 확인할 수 있을 것이다.</p>

<hr />

<p>다른 테스트도 작성해 보자. <code class="highlighter-rouge">ResultView</code>가 남았다. detail과 거의 같게 하면 된다. <code class="highlighter-rouge">blog/views.py</code>를 수정하고, <code class="highlighter-rouge">blog/texts.py</code>에 좀전과 마찬가지로 테스트 클래스를 작성하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">class</span> <span class="n">ResultsView</span><span class="p">(</span><span class="n">generic</span><span class="p">.</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="k">model</span> <span class="p">=</span> <span class="n">Question</span>
    <span class="n">template_name</span> <span class="p">=</span> <span class="s1">'blog/results.html'</span>

    <span class="n">def</span> <span class="n">get_queryset</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>                  
        <span class="s2">"""
        Excludes any questions that aren't published yet.
        """</span>
        <span class="n">return</span> <span class="n">Question</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pub_date__lte</span><span class="p">=</span><span class="n">timezone</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
</code></pre></div></div>

<p>@blog/tests.py</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class QuestionResultsViewTests(TestCase):
    def test_future_question(self):
        """
        The results view of a question with a pub_date in the future
        returns a 404 not found.
        """
        future_question = create_question(question_text='Future question.', days=5)
        url = reverse('blog:results', args=(future_question.id,))
        response = self.client.get(url)
        self.assertEqual(response.status_code, 404)

    def test_past_question(self):
        """
        The results view of a question with a pub_date in the past
        displays the question's text.
        """
        past_question = create_question(question_text='Past Question.', days=-5)
        url = reverse('blog:results', args=(past_question.id,))
        response = self.client.get(url)
        self.assertContains(response, past_question.question_text)
</code></pre></div></div>

<hr />

<p>다른 여러가지 테스트도 생각해 볼 수 있다. 가령, 선택지가 없는 질문을 배제한다던가, 관리자에게만은 선택지가 없거나 미래에 보일 질문들은 보이게 한다던가 하는 테스트 말이다. 앞의 것은 어렵지 않을 것 같다. 테스트 코드를 먼저 작성해 보자. 다음의 테스트 코드를 추가하자. 의미는 명료하다. 일단 index 페이지에서 선택지가 없는 질문은 배제하는 것이다. client가 index 페이지에 get요청을 해서 받은 응답 중에 표시되어야 할 질문의 스트링이 포함되어 있는지를 확인하는 코드이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class QuestionEmptyChoiceUnvisibleTests(TestCase):

    def test_empty_choice_question_index(self):
        empty_choice_question =Question.objects.create(question_text ='Empty Choice Question.', pub_date =timezone.now())
        response =self.client.get(reverse('blog:index'))
        self.assertNotContains(response, empty_choice_question.question_text)

    def test_non_empty_choice_question_index(self):
        empty_choice_question =Question.objects.create(question_text ='Non-Empty Choice Question.', pub_date =timezone.now())
        empty_choice_question.choice_set.create(choice_text ='One', votes =0 )
        empty_choice_question.choice_set.create(choice_text ='Two', votes =0 )
        empty_choice_question.choice_set.create(choice_text ='Three', votes =0 )
        response =self.client.get(reverse('blog:index'))
        self.assertContains(response, empty_choice_question.question_text)
</code></pre></div></div>

<p>이대로 테스트를 실행하면 당연히 오류가 뜬다. index view에서 빈 질문에 대한 필터가 없기 때문이다. <code class="highlighter-rouge">blog.views.py</code>의 인덱스 뷰에 추가하자. <a href="https://docs.djangoproject.com/ko/2.0/topics/db/queries/#chaining-filters">chained filter</a>를 참고해서 작성하였다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def get_queryset(self): 
    """Return the last five published questions."""
     return Question.objects.filter( pub_date__lte =timezone.now() 
                           ).exclude( choice__isnull =True 
                           ).order_by('-pub_date')[:5]
</code></pre></div></div>

<p>현재 이전에 작성한 글 중에 질문이 없는 글을 제외하는 조건을 더했다. 다시 테스트 스크립트를 실행해 보자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test blog
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.....F.FF.....
======================================================================
FAIL: test_future_question_and_past_question (blog.tests.QuestionIndexViewTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/rockheung/git/django-blog/_base/blog/tests.py", line 96, in test_future_question_and_past_question
    ['&lt;Question: Past question.&gt;']
  File "/home/rockheung/.virtualenvs/django-blog/lib/python3.5/site-packages/django/test/testcases.py", line 940, in assertQuerysetEqual
    return self.assertEqual(list(items), values, msg=msg)
AssertionError: Lists differ: [] != ['&lt;Question: Past question.&gt;']

Second list contains 1 additional elements.
First extra element 0:
'&lt;Question: Past question.&gt;'

- []
+ ['&lt;Question: Past question.&gt;']

======================================================================
FAIL: test_past_question (blog.tests.QuestionIndexViewTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/rockheung/git/django-blog/_base/blog/tests.py", line 70, in test_past_question
    ['&lt;Question: Past question.&gt;']
  File "/home/rockheung/.virtualenvs/django-blog/lib/python3.5/site-packages/django/test/testcases.py", line 940, in assertQuerysetEqual
    return self.assertEqual(list(items), values, msg=msg)
AssertionError: Lists differ: [] != ['&lt;Question: Past question.&gt;']

Second list contains 1 additional elements.
First extra element 0:
'&lt;Question: Past question.&gt;'

- []
+ ['&lt;Question: Past question.&gt;']

======================================================================
FAIL: test_two_past_questions (blog.tests.QuestionIndexViewTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/rockheung/git/django-blog/_base/blog/tests.py", line 110, in test_two_past_questions
    ['&lt;Question: Past question 2.&gt;', '&lt;Question: Past question 1.&gt;']
  File "/home/rockheung/.virtualenvs/django-blog/lib/python3.5/site-packages/django/test/testcases.py", line 940, in assertQuerysetEqual
    return self.assertEqual(list(items), values, msg=msg)
AssertionError: Lists differ: [] != ['&lt;Question: Past question 2.&gt;', '&lt;Question: Past question 1.&gt;']

Second list contains 2 additional elements.
First extra element 0:
'&lt;Question: Past question 2.&gt;'

- []
+ ['&lt;Question: Past question 2.&gt;', '&lt;Question: Past question 1.&gt;']

----------------------------------------------------------------------
Ran 14 tests in 0.041s

FAILED (failures=3)
Destroying test database for alias 'default'...
</code></pre></div></div>

<p>잘 작동하던 테스트 스크립트가 오류를 뿜어 잠시 당황하였으나, 생각해보니 당연한 결과다. 기존의 코드에서 과거와 미래의 질문을 임시로 작성할 때 선택지는 넣지 않았던 것이다. 이를 간단하게 수정하자. 그저 임시로 만드는 질문에 선택지를 넣으면 된다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>q =create_question(question_text="Future question.", days=30)
q.choice_set.create()
</code></pre></div></div>

<p>위에서 뜬 3가지 오류 이외에  <code class="highlighter-rouge">test_future_question()</code>메서드도 수정해야 맞다. 에러를 띄우지 않았던 이유는 애초에 아무것도 표시되지 않기를 기대했기 때문이다. 사실 위에서 선택지를 만드는 것도 엄밀히 말하면 아주 맞는 것은 아닌데, 아무 내용이 없는 선택지를 가정한 것이기 때문이다. 수정이 잘 되었다면 테스트 스크립트를 실행해 보자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test tuto
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
..............
----------------------------------------------------------------------
Ran 14 tests in 0.043s

OK
Destroying test database for alias 'default'...
</code></pre></div></div>

<p>에러 없이 잘 완료한 것을 볼 수 있다.</p>

  </div>

  

  <a class="u-url" href="/django/2018/03/08/4-2-django-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%90%EB%8F%99%ED%99%94.html" hidden></a>
</article>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- jQuery Custom Scroller CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
<!-- Custom -->
<script type="text/javascript">
  $(document).ready(function () {

    $("#sidebar").mCustomScrollbar({
      theme: "minimal"
    });

    $('#sidebarCollapse').on('click', function () {
      // open or close navbar
      $('#sidebar, #content, #banner').toggleClass('active');
      // close dropdowns
      $('#sidebar.collapse.in').toggleClass('in');
      // and also adjust aria-expanded attributes we use for the open/closed arrows
      // in our CSS
      $('.page-header').toggleClass('active');
      //Custom for entry_title
      $('a[aria-expanded=true]').attr('aria-expanded', 'false');
    });

  });
</script>



  </body>

</html>
